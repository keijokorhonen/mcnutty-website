<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- The width=device-width part sets the width of the page to follow the screen-width of the device (which will vary depending on the device). The initial-scale=1 part sets the initial zoom level when the page is first loaded by the browser. -->
    <title> IB14 Schedule </title>
    <link rel="stylesheet" type="text/css" href="../css/main.css"> <!-- main stylesheet -->
    <!-- <link href='https://fonts.googleapis.com/css?family=Oxygen:400,300|Source+Sans+Pro' rel='stylesheet' type='text/css'> --><!-- used Google Fonts to import fonts -->
    <!-- <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> -->
    <link rel="icon" href="../icons/calendar.svg">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"> </script> <!-- CDN jqeury source -->
    <script src="../js/schedule.js"> </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> <!-- Bootstrap JS CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><!-- Bootstrap CSS CDN -->
    <link rel='stylesheet' href='fullcalendar/fullcalendar.css'>
    <link rel='stylesheet' href='../css/schedule.css'>
    <link rel='stylesheet' href='theme/jquery-ui.theme.css'>
    <link rel='stylesheet' href='theme/jquery-ui.theme.min.css'>
    <link rel='stylesheet' href='theme/jquery-ui.css'>
    <link rel='stylesheet' href='theme/jquery-ui.structure.css'>
    <script src='theme/jquery-ui.js'></script>
    <script src='fullcalendar/lib/jquery.min.js'></script>
    <script src='fullcalendar/lib/moment.min.js'></script>
    <script src='fullcalendar/fullcalendar.js'></script>
    <script>
      function setCookie(cname,cvalue,exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        var expires = "expires=" + d.toGMTString();
        document.cookie = cname+"="+cvalue+"; "+expires;
      }

      function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i=0; i<ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
      }

      var class_ids  = [  ECOhlEK ,  ECOhlET , ECOhlAN ,  PSYChlHE ,  PSYCslMNP ,  MAhlCNS ,  MAslLGN ,  MAslMP , MASTslKHL ,  MASTslDL ,  HIShlON ,  HIShlLT ,  HIShlANG ,  BMslEDK , SWEBhlPNL ,  SWEBslPNL ,  SWELLhlLTE ,  SWELLslBM ,  SWELhlGD , CHEMhlSM ,  CHEMhlSCH ,  CHEMslJN ,  GLOPOLHR , THEAhlGG ,  PHYhlFM ,  PHYhlEE , PHYslEE , ENVslNNG , ENVslSTD ,  ENGLhlWR , ENGLLhlFD ,  ENGLLhlGG ,  ENGLslWR ,  ENGBhlPNJ ,  ENGBhlMM ,  ENGLLslANM ,  BIOhlLQ ,  BIOhlBOU , BIOslNNG,  FREBhlHK , FREBslHK,  SPABhlTEU , SPABslTEU, TOK_DL , TOK_LGN ,  TOK_WR ,  TOK_EE ]

      var addEventSource = function(course) {
        //$('#'+course.id).parent().parent().toggleClass('clicked')
        //$('#'+course.id).parent().toggleClass('clicked')
        if (course.clicked == false) {
          setCookie(course.id,'y', 20000000)
          course.clicked = true
          $('#schedule').fullCalendar( 'addEventSource', course)

        }
        else {
          setCookie(course.id,'n', 20000000);
          course.clicked = false;
          $('#schedule').fullCalendar( 'removeEventSource', course.id )
        };
      };

      // stuff for the intro message
      if (getCookie('first-time') == ''){
        (setCookie('first-time', 'y',20000000));
      }
      if (getCookie('first-time') == 'n'){
        $('#message').toggleClass('message-hidden');
        $('#message').toggleClass('message');

      }
      $(document).ready(function() {
        $('[data-toggle=offcanvas]').click(function() {
          $('.row-offcanvas').toggleClass('active'); //sidebar shit
        });
        $(".dropdown").hover(function() {
          $(this).children('.dropdown-content').toggleClass('show');
        });
        $(".dropdown-content a").click(function() {
          if (getCookie('first-time') == 'y') {
            setCookie('first-time', 'n', 20000000)
          }
          $('#message').fadeOut(200); // hides initial message when a class is chosen
        })
        $(".dropdown").click(function() {
          if (getCookie('first-time') == 'y') {
            setCookie('first-time', 'n', 20000000)
          }
          $('#message').fadeOut(200); // hides initial message when a class is chosen
        })
        $('#schedule').fullCalendar({
          header: {
            left: 'prev,next',
            center: 'title',
            right: 'clearAll today'
          },
          theme: true,
          defaultDate: '2016-08-22',
          defaultView: 'agendaWeek',
          slotLabelFormat: 'H:mm',
          slotEventOverlap: false,
          allDaySlot: false,
          weekNumbers: true,
          weekends: false,
          editable: false,
          minTime: '08:00:00',
          maxTime: '17:00:00',
          eventLimit: true, // allow "more" link when too many events
          weekNumberTitle: "Week ",
          contentHeight:420,
          eventSources: [],
          customButtons: {
             clearAll: {
                text: 'Clear All',
                    click: function() {
                        $('#schedule').fullCalendar( 'removeEventSources');
                    }
                }
            },
        });
        var i;
        for (i = 0; i < class_ids.length ; i++) {
          if (getCookie(class_ids[i].id) == 'y') {
              addEventSource(class_ids[i]);
          };
        };
      });

    </script>
  </head>
  <body>
    <div class = "page-container">
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"><span class="brand-ib">ib</span>.<span class="brand-borgar">borgar</span>.<span class = "brand-se">se</span></a>
          </div>
          <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
              <li><a href="../index.html">Home</a></li>
              <li class="active"><a href="index.html">Schedule</a></li>
              <li><a href="#">News</a></li>
              <li><a href="#">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
      <div class="navbar navbar-default navbar-fixed-bottom" role="navigation">
         <div class="container">
            <div class="navbar-header">
             <button type="button" class="navbar-toggle subject-btn" data-toggle="offcanvas" data-target=".sidebar-nav">
               <span> Subjects</span>
             </button>
            </div>
         </div>
      </div>
      <div id = "content" class ="container-fluid">
        <div class="row row-offcanvas row-offcanvas-left">
          <div class="col-xs-6 col-sm-2 sidebar-offcanvas" id="sidebar" role="navigation">
              <ul class="nav">
                <li> Subjects</li>
                <li><a onClick="addEventSource(ECOhlEK)">Economics</a></li>
                <li><a onClick="addEventSource(ECOhlEK)">Pyschology</a></li>
                <li><a onClick="addEventSource(ECOhlEK)">History</a></li>
              </ul>
          </div>
          <div id = "schedule" class = "col-xs-12 col-md-10"></div>
        </div>
      </div>
    </div>
  </body>
</html>
